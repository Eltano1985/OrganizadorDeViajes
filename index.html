<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificador de Viajes</title>
    <link rel="stylesheet" href="estilos.css"> <!-- Enlace a tu archivo CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" /> <!-- CSS de Leaflet -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script> <!-- QRCode.js -->
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Planificador de Viajes</h1>
            <div id="qr-code"></div> <!-- Contenedor para el QR Code -->
        </div>
    </header>
    <main>
        <div id="trip-planner">
            <div id="trip-form">
                <h2>Formulario de Planificación</h2>
                <form id="itinerary-form">
                    <div>
                        <label for="destination">Destino</label>
                        <input type="text" id="destination" name="destination" required>
                    </div>
                    <div>
                        <label for="start-date">Fecha de Salida</label>
                        <input type="date" id="start-date" name="start-date" required>
                    </div>
                    <div>
                        <label for="end-date">Fecha de Llegada</label>
                        <input type="date" id="end-date" name="end-date" required>
                    </div>
                    <button id="plan-trip-btn" type="submit" disabled>Planificar Viaje</button>
                </form>
                <div id="itinerary-list"></div> <!-- Lista de itinerarios -->
            </div>

            <div id="activities-section">
                <h2>Actividades sugeridas</h2>
                <div id="activities-list"></div> <!-- Contenedor para las actividades -->
                <div id="selection-error" style="display: none; color: red;">Has alcanzado el límite de 10 actividades.</div>
                <button id="more-info-btn">Más información</button> <!-- Botón Más información -->
            </div>

            <div id="map-section">
                <h2>Mapa</h2>
                <div id="map" style="height: 400px;"></div> <!-- Establecer altura para el mapa -->
            </div>
        </div>
    </main>
    <footer>
        <p>© 2024 Planificador de Viajes</p>
    </footer>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script> <!-- JS de Leaflet -->
    <script type="module" src="OrganizadorDeViajes.js"></script> <!-- Enlace a tu archivo JavaScript -->
    <script>
        // Generar el código QR cuando se carga la página
        $(document).ready(function() {
            const appUrl = "https://eltano1985.github.io/OrganizadorDeViajes/"; // Cambia esta URL a la dirección de tu aplicación
            $("#qr-code").qrcode({
                text: appUrl,
                width: 128, // Ancho del código QR
                height: 128 // Alto del código QR
            });
            
            // Redirigir a la nueva página de información con el destino seleccionado
            $('#more-info-btn').on('click', function() {
                const destino = $('#destination').val(); // Obtiene el destino ingresado
                if (destino) {
                    localStorage.setItem('destinoSeleccionado', destino); // Guarda el destino en localStorage
                    window.location.href = 'masinformacion.html'; // Redirige a la página secundaria
                } else {
                    alert("Por favor, ingresa un destino antes de continuar."); // Alerta si no hay destino
                }
            });
        });
    </script>
</body>
</html>
